<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
*{margin:0;padding:0;box-sizing:border-box}:root{--primary:#3b82f6;--accent:#06b6d4;--success:#10b981;--error:#ef4444;--bg-dark:#0a0a0f;--bg-card:#0f0f1a;--bg-elevated:#1a1a2e;--text:#e2e8f0;--text-dim:#94a3b8;--text-muted:#64748b;--border:rgba(148,163,184,0.1);--border-bright:rgba(148,163,184,0.2)}body{background:var(--bg-dark);color:var(--text);font-family:'Poppins',sans-serif;overflow-x:hidden}.admin-wrapper{min-height:100vh}.admin-navbar{background:var(--bg-card);border-bottom:1px solid var(--border-bright);padding:1rem 0;position:sticky;top:0;z-index:100;box-shadow:0 4px 20px rgba(0,0,0,0.3)}.admin-nav-content{max-width:1400px;margin:0 auto;padding:0 1rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.admin-logo{display:flex;align-items:center;gap:0.75rem;font-size:1.25rem;font-weight:700;color:var(--text)}.admin-logo i{font-size:1.75rem;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.admin-user-info{display:flex;align-items:center;gap:0.75rem;flex-wrap:wrap}.admin-user-badge{display:flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:rgba(59,130,246,0.1);border:1px solid rgba(59,130,246,0.3);border-radius:50px;color:var(--primary);font-weight:500;font-size:0.9rem}.btn-admin-logout{display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:linear-gradient(135deg,#ef4444,#dc2626);color:white;border:none;border-radius:50px;font-weight:600;text-decoration:none;cursor:pointer;transition:all .3s ease;font-size:0.9rem}.btn-admin-logout:hover{transform:translateY(-2px)}.admin-container{max-width:1400px;margin:0 auto;padding:1rem}.stats-grid-admin{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:2rem}.stat-card-admin{background:var(--bg-card);border:1px solid var(--border);border-radius:16px;padding:1.25rem;display:flex;align-items:center;gap:1rem;transition:all .3s ease}.stat-card-admin:hover{transform:translateY(-3px);border-color:rgba(59,130,246,0.5)}.stat-icon-admin{width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:white;flex-shrink:0}.stat-details{flex:1;min-width:0}.stat-label-admin{font-size:0.75rem;color:var(--text-dim);margin-bottom:0.25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.stat-value-admin{font-size:1.5rem;font-weight:700;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.alert-admin{padding:1rem;border-radius:12px;margin-bottom:1.5rem;display:none;align-items:center;gap:0.75rem;font-weight:500;font-size:0.9rem}.alert-success{background:rgba(16,185,129,0.1);color:var(--success);border:1px solid rgba(16,185,129,0.3)}.alert-error{background:rgba(239,68,68,0.1);color:var(--error);border:1px solid rgba(239,68,68,0.3)}.admin-card{background:var(--bg-card);border:1px solid var(--border-bright);border-radius:20px;overflow:hidden}.admin-card-header{padding:1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;background:var(--bg-elevated)}.admin-card-header h2{font-size:1.5rem;font-weight:700;color:var(--text);display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap}.admin-card-header p{font-size:0.85rem;color:var(--text-dim);margin-top:0.25rem}.btn-admin-primary{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0.75rem 1.5rem;border:none;border-radius:10px;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all .3s ease;background:linear-gradient(135deg,var(--primary),var(--accent));color:white;font-family:'Poppins',sans-serif;white-space:nowrap}.btn-admin-primary:hover{transform:translateY(-2px)}.btn-admin-secondary{background:rgba(255,255,255,0.05);color:var(--text-dim);border:2px solid var(--border)}.loading-admin{text-align:center;padding:3rem 1rem;color:var(--text-dim)}.spinner-admin{width:50px;height:50px;border:3px solid rgba(59,130,246,0.2);border-top-color:var(--primary);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 1rem}@keyframes spin{to{transform:rotate(360deg)}}.table-responsive{overflow-x:auto;padding:1rem}.admin-table{width:100%;border-collapse:collapse;min-width:800px}.admin-table thead{background:rgba(59,130,246,0.05)}.admin-table th{padding:1rem 0.75rem;text-align:left;color:var(--primary);font-weight:600;font-size:0.85rem;border-bottom:2px solid var(--border);white-space:nowrap}.admin-table td{padding:1rem 0.75rem;border-bottom:1px solid var(--border);color:var(--text-dim);font-size:0.9rem}.admin-table tbody tr:hover{background:rgba(59,130,246,0.05)}.admin-table code{background:rgba(59,130,246,0.1);color:var(--primary);padding:0.25rem 0.5rem;border-radius:6px;font-family:monospace;font-size:0.85rem}.price-tag{font-weight:700;color:var(--success);font-size:1rem}.badge-unlimited,.badge-special,.badge-standard{display:inline-block;padding:0.25rem 0.75rem;border-radius:20px;font-size:0.75rem;font-weight:600;white-space:nowrap}.badge-unlimited{background:linear-gradient(135deg,#f59e0b,#d97706);color:white}.badge-special{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:white}.badge-standard{background:linear-gradient(135deg,#10b981,#059669);color:white}.action-buttons{display:flex;gap:0.5rem}.btn-action-edit,.btn-action-delete{width:36px;height:36px;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;font-size:0.9rem}.btn-action-edit{background:linear-gradient(135deg,#3b82f6,#2563eb);color:white}.btn-action-delete{background:linear-gradient(135deg,#ef4444,#dc2626);color:white}.btn-action-edit:hover,.btn-action-delete:hover{transform:scale(1.1)}.modal-admin{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.85);align-items:center;justify-content:center;padding:1rem;overflow-y:auto}.modal-content-admin{background:var(--bg-card);border:1px solid var(--border-bright);border-radius:20px;max-width:700px;width:100%;max-height:90vh;overflow-y:auto;margin:auto}.modal-header-admin{padding:1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;background:var(--bg-elevated);gap:1rem}.modal-header-admin h3{font-size:1.25rem;font-weight:700;color:var(--text);display:flex;align-items:center;gap:0.5rem;flex:1;min-width:0}.modal-close-admin{width:36px;height:36px;background:rgba(239,68,68,0.1);border:none;border-radius:10px;color:var(--error);font-size:1.1rem;cursor:pointer;flex-shrink:0}.modal-content-admin form{padding:1.5rem}.form-row-admin{display:grid;grid-template-columns:1fr;gap:1rem}.form-group-admin{margin-bottom:1rem}.form-group-admin label{display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;font-weight:500;color:var(--text);font-size:0.9rem}.form-group-admin input{width:100%;padding:0.875rem 1rem;background:rgba(255,255,255,0.05);border:2px solid var(--border);border-radius:10px;color:var(--text);font-size:0.95rem;font-family:'Poppins',sans-serif}.form-group-admin input:focus{outline:none;border-color:var(--primary);background:rgba(255,255,255,0.08)}.form-hint-admin{display:flex;align-items:center;gap:0.5rem;margin-top:0.5rem;color:var(--text-muted);font-size:0.8rem}.modal-footer-admin{display:grid;grid-template-columns:1fr 1fr;gap:0.75rem;margin-top:1.5rem}.modal-footer-admin button{width:100%;padding:0.875rem}@media(min-width:640px){.admin-container{padding:1.5rem}.stats-grid-admin{grid-template-columns:repeat(2,1fr);gap:1.25rem}.stat-icon-admin{width:60px;height:60px;font-size:1.75rem}.stat-value-admin{font-size:1.75rem}.form-row-admin{grid-template-columns:repeat(2,1fr);gap:1.25rem}.admin-card-header{padding:1.75rem}.admin-card-header h2{font-size:1.65rem}}@media(min-width:968px){.admin-container{padding:2rem}.stats-grid-admin{grid-template-columns:repeat(4,1fr);gap:1.5rem}.stat-card-admin{padding:1.5rem}.stat-icon-admin{width:70px;height:70px;font-size:2rem}.stat-label-admin{font-size:0.85rem}.stat-value-admin{font-size:2rem}.admin-card-header{padding:2rem}.admin-card-header h2{font-size:1.75rem}.table-responsive{padding:1.5rem}.modal-content-admin form{padding:2rem}.form-row-admin{gap:1.5rem}.form-group-admin{margin-bottom:1.5rem}.modal-footer-admin{margin-top:2rem}}@media(max-width:639px){.admin-nav-content{justify-content:center;text-align:center}.admin-logo{width:100%;justify-content:center}.admin-user-info{width:100%;justify-content:center}.admin-card-header{flex-direction:column;align-items:stretch;text-align:center}.admin-card-header h2{justify-content:center}.btn-admin-primary{width:100%}.admin-table{font-size:0.8rem}.admin-table th,.admin-table td{padding:0.75rem 0.5rem}.badge-unlimited,.badge-special,.badge-standard{font-size:0.7rem;padding:0.2rem 0.6rem}.btn-action-edit,.btn-action-delete{width:32px;height:32px;font-size:0.85rem}.modal-header-admin{padding:1rem}.modal-header-admin h3{font-size:1.1rem}.modal-content-admin form{padding:1rem}.modal-footer-admin{grid-template-columns:1fr;gap:0.5rem}.modal-footer-admin button{padding:0.75rem}}
  </style>
</head>
<body>
<div class="admin-wrapper">
<nav class="admin-navbar"><div class="admin-nav-content"><div class="admin-logo"><i class="fas fa-shield-halved"></i><span>Admin Dashboard</span></div><div class="admin-user-info"><div class="admin-user-badge"><i class="fas fa-user-shield"></i><span><%= adminUsername %></span></div><a href="/admin/logout" class="btn-admin-logout"><i class="fas fa-sign-out-alt"></i>Logout</a></div></div></nav>
<div class="admin-container">
<div class="stats-grid-admin">
<div class="stat-card-admin"><div class="stat-icon-admin" style="background:linear-gradient(135deg,#3b82f6,#06b6d4)"><i class="fas fa-box"></i></div><div class="stat-details"><div class="stat-label-admin">Total Produk</div><div class="stat-value-admin" id="statTotal">0</div></div></div>
<div class="stat-card-admin"><div class="stat-icon-admin" style="background:linear-gradient(135deg,#10b981,#059669)"><i class="fas fa-coins"></i></div><div class="stat-details"><div class="stat-label-admin">Total Harga</div><div class="stat-value-admin" id="statRevenue">Rp 0</div></div></div>
<div class="stat-card-admin"><div class="stat-icon-admin" style="background:linear-gradient(135deg,#8b5cf6,#7c3aed)"><i class="fas fa-chart-line"></i></div><div class="stat-details"><div class="stat-label-admin">Rata-rata</div><div class="stat-value-admin" id="statAvg">Rp 0</div></div></div>
<div class="stat-card-admin"><div class="stat-icon-admin" style="background:linear-gradient(135deg,#f59e0b,#d97706)"><i class="fas fa-crown"></i></div><div class="stat-details"><div class="stat-label-admin">Termahal</div><div class="stat-value-admin" id="statMax">Rp 0</div></div></div>
</div>
<div id="alert" class="alert-admin"></div>
<div class="admin-card">
<div class="admin-card-header"><div><h2><i class="fas fa-boxes"></i> Manajemen Produk</h2><p>Kelola semua produk panel yang tersedia</p></div><button class="btn-admin-primary" id="btnAdd"><i class="fas fa-plus"></i>Tambah Produk</button></div>
<div id="loading" class="loading-admin"><div class="spinner-admin"></div><p>Memuat data produk...</p></div>
<div id="tableWrapper" style="display:none"><div class="table-responsive"><table class="admin-table"><thead><tr><th><i class="fas fa-tag"></i> ID</th><th><i class="fas fa-signature"></i> Nama</th><th><i class="fas fa-money-bill-wave"></i> Harga</th><th><i class="fas fa-memory"></i> RAM</th><th><i class="fas fa-hdd"></i> Disk</th><th><i class="fas fa-microchip"></i> CPU</th><th><i class="fas fa-info-circle"></i> Status</th><th><i class="fas fa-cog"></i> Aksi</th></tr></thead><tbody id="tbody"></tbody></table></div></div>
</div>
</div>
</div>
<div id="modal" class="modal-admin">
<div class="modal-content-admin">
<div class="modal-header-admin"><h3 id="mtitle"><i class="fas fa-plus-circle"></i> Tambah Produk</h3><button class="modal-close-admin" id="btnClose"><i class="fas fa-times"></i></button></div>
<form id="form">
<input type="hidden" id="eid">
<div class="form-row-admin">
<div class="form-group-admin"><label for="pid"><i class="fas fa-tag"></i> ID Produk</label><input type="text" id="pid" required placeholder="contoh: 12gb"><small class="form-hint-admin"><i class="fas fa-info-circle"></i>Hanya huruf kecil, angka, - dan _</small></div>
<div class="form-group-admin"><label for="price"><i class="fas fa-money-bill-wave"></i> Harga (Rp)</label><input type="number" id="price" required placeholder="50000" min="0"><small class="form-hint-admin"><i class="fas fa-info-circle"></i>Harga dalam Rupiah</small></div>
</div>
<div class="form-row-admin">
<div class="form-group-admin"><label for="ram"><i class="fas fa-memory"></i> RAM (MB)</label><input type="number" id="ram" required placeholder="1000" min="0"><small class="form-hint-admin"><i class="fas fa-infinity"></i>Gunakan 0 untuk unlimited</small></div>
<div class="form-group-admin"><label for="disk"><i class="fas fa-hdd"></i> Disk (MB)</label><input type="number" id="disk" required placeholder="5000" min="0"><small class="form-hint-admin"><i class="fas fa-infinity"></i>Gunakan 0 untuk unlimited</small></div>
</div>
<div class="form-group-admin"><label for="cpu"><i class="fas fa-microchip"></i> CPU (%)</label><input type="number" id="cpu" required placeholder="100" min="0"><small class="form-hint-admin"><i class="fas fa-infinity"></i>Gunakan 0 untuk unlimited</small></div>
<div class="modal-footer-admin"><button type="button" class="btn-admin-primary btn-admin-secondary" id="btnCancel"><i class="fas fa-times"></i> Batal</button><button type="submit" class="btn-admin-primary"><i class="fas fa-save"></i> Simpan</button></div>
</form>
</div>
</div>
<script>
let products=[],editMode=!1;const $=(s)=>document.getElementById(s),$$=(s)=>document.querySelectorAll(s);async function loadData(){try{const[e,t]=await Promise.all([fetch("/api/admin/products"),fetch("/api/admin/stats")]),s=await e.json(),a=await t.json();s.success&&(products=s.products,renderProducts()),a.success&&renderStats(a.stats),$("loading").style.display="none",$("tableWrapper").style.display="block"}catch(e){showAlert("Gagal memuat data: "+e.message,"error")}}function renderStats(e){$("statTotal").textContent=e.totalProducts,$("statRevenue").textContent="Rp "+e.totalRevenue.toLocaleString("id-ID"),$("statAvg").textContent="Rp "+e.avgPrice.toLocaleString("id-ID"),$("statMax").textContent="Rp "+e.mostExpensive.toLocaleString("id-ID")}function renderProducts(){if(0===products.length)return void($("tbody").innerHTML='<tr><td colspan="8" style="text-align:center;padding:2rem">Belum ada produk</td></tr>');$("tbody").innerHTML=products.map((e)=>`<tr><td><code>${e.id}</code></td><td><strong>${e.name}</strong></td><td><span class="price-tag">Rp ${e.price.toLocaleString("id-ID")}</span></td><td>${0===e.specs.ram?'<span class="badge-unlimited">∞ Unlimited</span>':e.specs.ram+" MB"}</td><td>${0===e.specs.disk?'<span class="badge-unlimited">∞ Unlimited</span>':e.specs.disk+" MB"}</td><td>${0===e.specs.cpu?'<span class="badge-unlimited">∞ Unlimited</span>':e.specs.cpu+"%"}</td><td>${0===e.specs.ram||0===e.specs.disk||0===e.specs.cpu?'<span class="badge-special">⭐ Premium</span>':'<span class="badge-standard">✓ Standard</span>'}</td><td><div class="action-buttons"><button class="btn-action-edit" data-id="${e.id}"><i class="fas fa-edit"></i></button><button class="btn-action-delete" data-id="${e.id}"><i class="fas fa-trash"></i></button></div></td></tr>`).join(""),$$(".btn-action-edit").forEach((e)=>e.onclick=()=>editProduct(e.dataset.id)),$$(".btn-action-delete").forEach((e)=>e.onclick=()=>deleteProduct(e.dataset.id))}function openModal(){editMode=!1,$("mtitle").innerHTML='<i class="fas fa-plus-circle"></i> Tambah Produk',$("form").reset(),$("eid").value="",$("pid").disabled=!1,$("modal").style.display="flex"}function editProduct(e){const t=products.find((t)=>t.id===e);t&&(editMode=!0,$("mtitle").innerHTML='<i class="fas fa-edit"></i> Edit Produk',$("eid").value=e,$("pid").value=e,$("pid").disabled=!0,$("price").value=t.price,$("ram").value=t.specs.ram,$("disk").value=t.specs.disk,$("cpu").value=t.specs.cpu,$("modal").style.display="flex")}function closeModal(){$("modal").style.display="none"}async function deleteProduct(e){if(!confirm(`Yakin ingin menghapus produk "${e}"?`))return;try{const t=await fetch(`/api/admin/products/${e}`,{method:"DELETE"}),s=await t.json();s.success?(showAlert(s.message,"success"),loadData()):showAlert(s.message,"error")}catch(e){showAlert("Gagal menghapus: "+e.message,"error")}}async function handleSubmit(e){e.preventDefault();const t=$("pid").value,s=$("price").value,a=$("ram").value,i=$("disk").value,r=$("cpu").value;try{let e;e=editMode?await fetch(`/api/admin/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({price:s,ram:a,disk:i,cpu:r})}):await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,price:s,ram:a,disk:i,cpu:r})});const d=await e.json();d.success?(showAlert(d.message,"success"),closeModal(),loadData()):showAlert(d.message,"error")}catch(e){showAlert("Gagal menyimpan: "+e.message,"error")}}function showAlert(e,t){$("alert").className=`alert-admin alert-${t}`,$("alert").innerHTML=`<i class="fas fa-${"success"===t?"check-circle":"exclamation-circle"}"></i><span>${e}</span>`,$("alert").style.display="flex",setTimeout(()=>{$("alert").style.display="none"},5e3)}$("btnAdd").onclick=openModal,$("btnClose").onclick=closeModal,$("btnCancel").onclick=closeModal,$("form").onsubmit=handleSubmit,window.onclick=(e)=>{e.target===$("modal")&&closeModal()},loadData();
</script>
</body>
</html>